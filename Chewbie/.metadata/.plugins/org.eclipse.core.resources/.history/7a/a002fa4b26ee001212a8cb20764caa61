package me.xiangchen.app.duetapp.call;

import java.util.Hashtable;

import me.xiangchen.app.duetapp.AppExtension;
import me.xiangchen.technique.posturesense.xacPostureSenseFeatureMaker;

import com.sonyericsson.extras.liveware.aef.control.Control;

public class CallExtension extends AppExtension {

	int posture;
	final String[] appExtensions = {"Email", "Calendar", "Contact"};
	int idxAppExts = 0;
	Hashtable<String, Integer> htIdxItems;
	public CallExtension() {
		CallManager.setWatch(this);
		htIdxItems = new Hashtable<String, Integer>();
	}
	
	@Override
	public void doResume() {
		showText("Call");
	}
	
	@Override
	public void doAccelerometer(float[] values) {
		xacPostureSenseFeatureMaker.updateWatchAccel(values);
		xacPostureSenseFeatureMaker.addWatchFeatureEntry();
	}
	
	@Override
	public void doSwipe(int direction) {
		posture = xacPostureSenseFeatureMaker.calculatePosture();
		if(posture != xacPostureSenseFeatureMaker.WATCH) {
			return;
		}
		
		switch (direction) {
		case Control.Intents.SWIPE_DIRECTION_UP:
			buzz(100);
			CallManager.playLastVoiceMail();
			break;
		case Control.Intents.SWIPE_DIRECTION_DOWN:
			buzz(100);
			CallManager.playNextVoiceMail();
			break;
		}
	}
	
	public void showAppExtension() {
		String strAppItem = appExtensions[idxAppExts] + " #" + (idxItems+1);
		showText(strAppItem);
	}
	
	public void nextApp() {
		idxAppExts = (idxAppExts + 1) % appExtensions.length;
	}
	
	public void lastApp() {
		idxAppExts = (idxAppExts + appExtensions.length - 1) % appExtensions.length;
	}
	
	public void nextItem() {
		
	}
	
	public void lastItem() {
		
	}
}
